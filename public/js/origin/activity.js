$(document).ready((function(){var e=1;function i(e){var i=function(){var e={},i={},t=$("body").find('[name="owner"]').val(),o=$("body").find('[name="action"]').val(),a=$("body").find('[name="module"]').val();(t||o||a)&&(t&&(i.owner=t),o&&(i.action=o),a&&(i.module=a),e.filters=i);return e}();$("body").find(".data-loader").show(),$.ajax({type:"GET",url:app_route+"?page="+e,data:i,dataType:"json",success:function(e){if(e.success){var i=e.data.activities,t=i.data,o=(i.from,"");if($("body").find(".not-found").remove(),t.length>0)$.each(t,(function(i,t){var a=!1,n=e.data.current_user_id==t.user_id?__("You"):t.user;n="<strong>"+__(n)+"</strong>";var d=moment.utc(t.created_at).tz(origin.time_zone).fromNow(),r=moment.utc(t.created_at).tz(origin.time_zone).format("D MMM YYYY â€¢ hh:mm A"),s="indicator-purple";if("Create"==t.action)s="indicator-success";else if("Update"==t.action)s="indicator-orange";else if("Delete"==t.action)s="indicator-danger";else if("Auth"==t.module)s="indicator-primary";if("Auth"==t.module)a="Login"==t.action?n+" "+__("logged in"):n+" "+__("logged out");else{var c="<strong>"+__(t.module)+": "+t.form_title+"</strong>";"Create"==t.action?a=__("New")+" "+c+" "+__("created by")+" "+n:"Update"==t.action?a=c+" "+__("updated by")+" "+n:"Delete"==t.action?(a="<strong>"+__(t.module)+": "+t.form_title+"</strong>",a+=" "+__("deleted by")+" "+n):"Download"==t.action&&(a="Report"==t.module?"<strong>"+t.form_title+"</strong> "+__("was downloaded by")+" "+n:c+" "+__("was downloaded by")+" "+n)}o+='<div>                                <i class="'+t.icon+" timeline-icon "+s+'"></i>                                <div class="timeline-item">                                    <span class="time">                                        <i class="fas fa-clock"></i> '+d+'                                    </span>                                    <div class="timeline-body">'+a+'<br />                                        <small class="text-muted">'+r+"</small>                                    </div>                                </div>                            </div>"})),$("body").find(".list-actions").show(),$("body").find(".origin-activities").empty().append(o),$("body").find(".page-no").html(i.current_page||"0"),$("body").find(".item-count").html(i.total||"0"),$("body").find(".item-from").html(i.from||"0"),$("body").find(".item-to").html(i.to||"0"),$("body").find(".origin-pagination-content").empty().append(makePagination(i));else{var a='<div class="not-found">'+getNoResults()+"</div>";$("body").find(".origin-activities").empty(),$("body").find(".origin-activities").after(a),$("body").find(".list-actions").hide()}}$("body").find(".data-loader").hide()},error:function(e){if(void 0!==JSON.parse(e.responseText).message)var i=JSON.parse(e.responseText).message;else i=__("Some error occured. Please try again");notify(i,"error"),$("body").find(".data-loader").hide()}})}i(e),$("body").on("click",".refresh-activity",(function(){i(e=1)})),$("body").on("change",".activity-filter",(function(t){i(e=1)})),$("body").on("click",".origin-pagination a",(function(t){t.preventDefault(),"#"!=$(this).attr("href")&&$(this).attr("href").indexOf("page=")>=0&&i(e=$(this).attr("href").split("page=")[1])})),$(window).on("hashchange",(function(){if(window.location.hash){var e=window.location.hash.replace("#","");if(e==Number.NaN||e<=0)return!1;i(e)}}))}));
